# 课程分类查询

> 如何生成树型结构对象

> 采用表自连接生成二级分类，二级分类没有数据

```java
@Data
public class CourseCategoryTreeDto extends CourseCategory implements Serializable {

    List childrenTreeNodes;
}
```

未添加`@Data`注解，childrenTreeNodes没有setter，因此无法赋值

# 异常处理

![](https://cyan-images.oss-cn-shanghai.aliyuncs.com/images/online-education-20230122-46.png)

全局异常处理后参数合法性校验抛出异常时前端没有返回给用户，只有服务端抛出异常

![](https://cyan-images.oss-cn-shanghai.aliyuncs.com/images/online-education-20230122-47.png)

> 解決方案

 @RestControllerAdvice 或者 @ControllerAdvice 可以直接作为错误处理的切面对待。但是使用过程中发现这两个注解无效，原因是我将GlobalExceptionHandler定义在另一个包里面，  @SpringBootApplication无法自动加载到该注解（springboot启动类的默认扫描路径是该类所在的包下面的所有java类。  添加上对应的scanBasePackages 即可（我这边改为扫描所有匹配com.galen.*的包） 

```java
@EnableSwagger2Doc
@SpringBootApplication(scanBasePackages = "com.cyan.springcloud.*")
public class ContentApiApplication {
    public static void main(String[] args) {
        SpringApplication.run(ContentApiApplication.class, args);
    }
}
```


# 需求分析

> 业务流程

1. 进入课程计划界面
2. 点击“添加章”新增第一级课程计划，新增成功自动刷新课程计划列表，
3. 点击“添加小节”向某个第一级课程计划下添加小节。新增成功自动刷新课程计划列表，新增的课程计划自动排序到最后
4. 点击“章”、“节”的名称，可以修改名称、选择是否免费。

> 数据模型

1、新增第一级课程计划

名称默认为：新章名称 [点击修改]

grade：1

orderby:  所属课程中同级别下排在最后

2、新增第二级课程计划

名称默认为：新小节名称 [点击修改]

grade：2

orderby:  所属课程计划中排在最后

3、修改第一级、第二级课程计划的名称，修改第二级课程计划是否免费

# 接口定义

```json
### 新增课程计划--章,当grade为1时parentid为0
POST /teachplan
Content-Type: application/json

{
  "courseId" : 74,
  "parentid": 0,
  "grade" : 1,
  "pname" : "新章名称 [点击修改]"
}
### 新增课程计划--节
POST {{content_host}}/content/teachplan
Content-Type: application/json

{
  "courseId" : 74,
  "parentid": 247,
  "grade" : 2,
  "pname" : "小节名称 [点击修改]"
}
```

同一个接口接收新增和修改两个业务请求，以是否传递课程计划id 来判断是新增还是修改。

如果传递了课程计划id说明当前是要修改该课程计划，否则是新增一个课程计划。

# 接口开发

# 接口测试

> 添加章

```json
### 新增课程计划--章
POST {{content_host}}/content/teachplan
Content-Type: application/json

{
  "courseId" : 74,
  "parentid": 0,
  "grade" : 1,
  "pname" : "新章名称 [点击修改]"
}
```

> 添加小节

```json
### 新增课程计划--节,从数据库找到第一级的课程计划id向其下边添加计划
POST {{content_host}}/content/teachplan
Content-Type: application/json

{
  "courseId" : 74,
  "parentid": 247,
  "grade" : 2,
  "pname" : "小节名称 [点击修改]"
}
```

> 保存课程计划

```json
### 课程课程计划,需要从数据库找到修改的课程计划id
POST {{content_host}}/content/teachplan
Content-Type: application/json

{
  "changeDate" : null,
  "courseId" : 22,
  "cousePubId" : null,
  "createDate" : null,
  "ctlBarShow" : false,
  "ctlEditTitle" : true,
  "endTime" : null,
  "grade" : "2",
  "isPreview" : "1",
  "mediaType" : "",
  "orderby" : 1,
  "parentid" : 237,
  "pname" : "第1节修改名称",
  "startTime" : null,
  "status" : null,
  "teachPlanId" : 240
}
```


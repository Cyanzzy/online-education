# 1 需求分析

## 业务流程

课程相关的信息有：

* 课程基本信息
* 课程营销信息
* 课程图片信息
* 课程计划
* 课程师资信息

以下是业务流程：

1、进入课程查询列表

![](https://cyan-images.oss-cn-shanghai.aliyuncs.com/images/online-education-20230122-32.png)

2、点击添加课程，选择课程类型是直播还是录播。

3、选择完毕，点击下一步，进入课程基本信息添加界面。

本界面分两部分信息，一部分是课程基本信息上，一部分是课程营销信息。

课程基本信息：

![](C:/Users/dell/AppData/Roaming/Typora/typora-user-images/1677229981706.png)

课程营销信息：

![](https://cyan-images.oss-cn-shanghai.aliyuncs.com/images/online-education-20230122-34.png)

4、在此界面填写课程计划信息

![](https://cyan-images.oss-cn-shanghai.aliyuncs.com/images/online-education-20230122-35.png)

课程计划即课程的大纲目录。

课程计划分为两级，章节和小节。

每个小节需要上传课程视频，用户点击 小节的标题即开始播放视频。

如果是直播课程则会进入直播间。

5、课程 计划填写完毕进入课程师资的管理。

![](https://cyan-images.oss-cn-shanghai.aliyuncs.com/images/online-education-20230122-36.png)

## 数据模型

通过业务流程可知，一门课程信息涉及：课程基本信息、课程营销信息、课程计划信息、课程师资信息。

![](https://cyan-images.oss-cn-shanghai.aliyuncs.com/images/online-education-20230122-37.png)

这两部分信息分别在course_base、course_market两张表存储。当点击保存按钮时向这两张表插入数据。这两张表是一对一关联关系。

![](https://cyan-images.oss-cn-shanghai.aliyuncs.com/images/online-education-20230122-38.png)

新建课程的初始审核状态为“未提交”、初始发布状态为“未发布”。

# 2 接口定义

定义提交课程基本信息的接口。

1、接口协议 ：HTTP POST，Content-Type为application/json

2、请求及响应结果如下

> 请求参数

| 名称         | 类型    | 是否必须 | 默认值 | 备注                         | 其他          |
| ------------ | ------- | -------- | ------ | ---------------------------- | ------------- |
| charge       | string  | 是       |        | 收费规则，对应数据字典       |               |
| courseBaseld | integer | 否       |        | 课程id                       | format: int64 |
| description  | string  | 否       |        | 课程介绍                     |               |
| grade        | string  | 是       |        | 课程等级                     |               |
| mt           | string  | 是       |        | 大分类                       |               |
| name         | string  | 是       |        | 课程名称                     |               |
| pic          | string  | 是       |        | 课程图片                     |               |
| price        | number  | 否       |        | 价格                         |               |
| st           | string  | 是       |        | 小分类                       |               |
| tags         | string  | 否       |        | 课程标签                     |               |
| teachmode    | string  | 是       |        | 教学模式 (普通，录播，直播） |               |
| users        | string  | 是       |        | 适用人群                     |               |

> 返回数据

| 名称          | 类型    | 是否必须 | 默认值 | 备注                           | 其他              |
| ------------- | ------- | -------- | ------ | ------------------------------ | ----------------- |
| auditStatus   | string  | 否       |        | 审核状态：CourseAuditEnum      |                   |
| changeDate    | integer | 否       |        |                                | format: date-time |
| charge        | string  | 是       |        | 收费规则，对应数据字典         |                   |
| companyld     | integer | 否       |        | 机构ID                         | format: int64     |
| companyName   | string  | 否       |        | 机构名称                       |                   |
| courseBaseld  | integer | 否       |        |                                | format: int64     |
| createDate    | string  | 否       |        |                                | format: date-time |
| description   | string  | 否       |        | 课程介绍                       |                   |
| grade         | string  | 否       |        | 课程等级                       |                   |
| learners      | integer | 否       |        | 学习（报名）人数               | format: int32     |
| mt            | string  | 是       |        | 大分类                         |                   |
| mtName        | string  | 否       |        | 大分类名称                     |                   |
| name          | string  | 是       |        | 课程名称                       |                   |
| pic           | string  | 否       |        | 课程图片                       |                   |
| price         | number  | 否       |        | 价格                           |                   |
| st            | string  | 是       |        | 小分类                         |                   |
| stName        | string  | 否       |        | 小分类名称                     |                   |
| subsectionNum | integer | 否       |        | 任务数                         | format: int32     |
| tags          | string  | 否       |        | 课程标签                       |                   |
| teachmode     | string  | 是       |        | 教学模式（普通、录播、直播等） |                   |
| users         | string  | 是       |        | 适用人群                       |                   |

> 请求示例

```json
### 创建课程
POST {{content_host}}/content/course
Content-Type: application/json

{

  "mt": "",
  "st": "",
  "name": "",
  "pic": "",
  "teachmode": "200002",
  "users": "初级人员",
  "tags": "",
  "grade": "204001",
  "description": "",
  "objectives": "",
  "charge": "201000",
  "price": 0,
  "originalPrice":0,
  "qq": "",
  "wechat": "",
  "phone": "",
  "validDays": 365
}

###响应结果如下
#成功响应结果如下
{
  "id": 109,
  "companyId": 1,
  "companyName": null,
  "name": "测试课程103",
  "users": "初级人员",
  "tags": "",
  "mt": "1-1",
  "mtName": null,
  "st": "1-1-1",
  "stName": null,
  "grade": "204001",
  "teachmode": "200002",
  "description": "",
  "pic": "",
  "createDate": "2022-09-08 07:35:16",
  "changeDate": null,
  "createPeople": null,
  "changePeople": null,
  "auditStatus": "202002",
  "status": 1,
  "coursePubId": null,
  "coursePubDate": null,
  "charge": "201000",
  "price": null,
  "originalPrice":0,
  "qq": "",
  "wechat": "",
  "phone": "",
  "validDays": 365
}
```

3、定义请求参数类型和响应结构类型
# 项目介绍

* 项目的背景 

* 项目的业务流程 
* 项目的功能模块
* 项目的技术架构
* 负责模块的详细说明，包括模块的设计，所用到的技术，技术的实现方案  



> 我最近参与的项目是我们公司自研的专门针对成人职业技能教育的网络课堂系统，网站提供了成人职业 技能培训的相关课程，如：软件开发培训、职业资格证书培训、成人学历教育培训等课程。项目基于 B2B2C的业务模式，培训机构可以在平台入驻、发布课程，我们公司作为运营方由专门的人员对发布的 课程进行审核，审核通过后课程才可以发布成功，课程包括免费和收费两种形式，对于免费课程普通用 户可以直接选课学习，对于收费课程在选课后需要支付成功才可以继续学习。 本项目包括三个端：用户端(学生端)、机构端、运营端。 核心模块包括：内容管理、媒资管理、课程搜索、订单支付、选课管理、认证授权等。 本项目采用前后端分离架构，后端采用SpringBoot、SpringCloud技术栈开发，数据库使用了MySQL， 还使用的Redis、消息队列、分布式文件系统、Elasticsearch等中间件系统。 划分的微服务包括：内容管理服务、媒资管理服务、搜索服务、订单支付服务、 学习中心服务、系统管 理服务、认证授权服务、网关服务、注册中心服务、配置中心服务等。 我在这个项目中负责了内容管理、媒资管理、订单支付模块的设计与开发。 内容管理模块，是对平台上的课程进行管理，课程的相关信息比较多这里在数据库设计了课程基本信息 表、课程营销表、课程计划、课程师资表进行存储 ，培训机构要发布一门课程需要填写课程基本信息、 课程营销信息、课程计划信息、课程师资信息，填写完毕后需要提交审核，由运营人员进行课程信息的 审核，整个审核过程是程序自动审核加人工确认的方式，通常24小时审核完成。课程审核通过即可发布 课程，课程的相关信息会聚合到课程发布表中，这里不仅要将课程信息写到课程发布表还要将课程信息 写到索引库、分布式文件系统中，所以这里存在分布式事务的问题，项目使用本地消息表加任务调度的 方式去解决这里的分布式事务，保存数据的最终一致性。 

# 项目开发环境搭建

## Git相关

### Git代码冲突怎么处理？ 

在使用Git时难免会出现代码冲突的问题，出现冲突的原因是因为**当本地文件的版本与目标分支中文件的版本不一致时当存在同一行的内容不同时在进行合并时会出现冲突。** 

>  代码冲突一般发生在以下情况： 
>
> *  多个分支向主分支合并时 
> *  同一个分支下pull或push操作时。 

发生了冲突需要手动合并代码，选择最终的版本，可以通过图形界面 

![](https://cyan-images.oss-cn-shanghai.aliyuncs.com/images/online-education-20230122-06.png)

![](https://cyan-images.oss-cn-shanghai.aliyuncs.com/images/online-education-20230122-07.png)

 选择版本后，点击Apply，提交代码并push到远程仓库。 不通过图形化界面处理冲突，当出现冲突后在代码中自动添加了版本标识，如下 

![](https://cyan-images.oss-cn-shanghai.aliyuncs.com/images/online-education-20230122-08.png)

![](https://cyan-images.oss-cn-shanghai.aliyuncs.com/images/online-education-20230122-09.png)

 将文件添加到暂存区，提交文件，push到远程仓库即可。 

### 在哪个分支开发？

 由技术经理创建独立的开发分支，我们是在独立的开发分支中进行开发， 最后由技术经理将开发分支合并到主分支。 

### maven依赖版本冲突怎么处理？ 

 maven依赖版本冲突一般是由于间接依赖导致一个jar包即有多个不同的版本 

> 如：
>
>  A依赖了B的1.0版 本，C依赖了B的2.0版本，项目依赖A和C从而间接依赖了B的1.0和2.0版本，此时B有两个版本引入到了 项目中，当存在版本冲突时可能会出现ClassNotFoundException、NoSuchMethodError等错误。 

**解决方案**

 1、使用exclusions 排除依赖  

​	如：我们只依赖B的1.0版本，此时可以在依赖C时排除对B的依赖。 

 2、使用dependencyManagement锁定版本号。 

 	通常在父工程对依赖的版本统一管理。 比如：我们只依赖B的1.0版本，此时可以在父工程中限定B的版本为1.0 

### maven的常用命令 

| 常用命令    | 说明                           |
| ----------- | ------------------------------ |
| mvn clean   | 清除target目录中的生成结果     |
| mvn compile | 编译源代码                     |
| mvn test    | 执行单元测试                   |
| mvn package | 打包                           |
| mvn install | 打包并把打好的包保存到本地仓库 |
| mvn deploy  | 打包并把打好的包上传到远程仓库 |

## 数据库相关

### MySQL常见的存储引擎及区别？ 

>  InnoDB 

* 支持事务
* 使用的锁粒度默认为行级锁，可以支持更高的并发；也支持表锁
*  支持外键约束；外键约束其实降低了表的查询速度，增加了表之间的耦合度。  

> MyISAM 

* 不提供事务支持
* 只支持表级锁
* 不支持外键 

>  memory 

*  数据存储在内存中 

**总结:**  

* MyISAM管理非事务表，提供高速存储和检索以及全文搜索能力，如果在应用中执行大量select操作， 应该选择MyISAM 

* InnoDB用于事务处理，具有ACID事务支持等特性，如果在应用中执行大量insert和update操作，应 该选择InnoDB 

### MySQL建表时注意什么？ 

1. 注意选择**存储引擎**，如果要支持事务需要选择InnoDB
2. 注意**字段类型**的选择，对于日期类型如果要记录时分秒建议使用datetime，只记录年月日使用date 类型，对于字符类型的选择，固定长度字段选择char，不固定长度的字段选择varchar，varchar比char 节省空间但速度没有char快；对于内容介绍类的长广文本字段使用text或longtext类型;如果存储图片等 二进制数据使用blob或longblob类型；对金额字段建议使用DECIMAL；对于数值类型的字段在确保取 值范围足够的前提下尽量使用占用空间较小的类型， 
3. 主键字段建议使用自然主键，不要有业务意义，建议使用int unsigned类型，特殊场景使用bigint类 型 
4.  如果要存储text、blob字段建议单独建一张表，使用外键关联
5. **尽量不要定义外键**，保证表的独立性，可以存在外键意义的字段
6.  设置字段默认值，比如：状态、创建时间等
7.  每个字段写清楚注释
8.  注意字段的约束，比如：非空、唯一、主键等 

# 内容管理模块

## 接口开发相关

### SpringBoot接口开发的常用注解有哪些？ 

| 注解            | 说明                                                         |
| --------------- | ------------------------------------------------------------ |
| @Controller     | 标记此类是一个控制器，可以返回视图解析器指定的html页面，通过@ResponseBody可以将结果返回json、xml数据。 |
| @RestController | 相当于@ResponseBody+@Controller，实现rest接口开发，返回json数据，不能返 回html页面。 |
| @RequestMapping | 定义接口地址，可以标记在类上也可以标记在方法上，支持http的post、put、get 等方法。 |
| @PostMapping    | 定义post接口，只能标记在方法上，用于添加记录，复杂条件的查询接口 |
| @GetMapping     | 定义get接口，只能标记在方法上，用于查询接口的定义。          |
| @PutMapping     | 定义put接口，只能标记在方法上，用于修改接口的定义。          |
| @DeleteMapping  | 定义delete接口，只能标记在方法上，用于删除接口的定义         |
| @RequestBody    | 定义在方法上，用于将json串转成java对象                       |
| @PathVarible    | 接收请求路径中占位符的值.                                    |
| @ApiOperation   | swagger注解，对接口方法进行说明。                            |
| @Api            | swagger注解，对接口类进行说明                                |
| @Autowired      | 基于类型注入。                                               |
| @Resource       | 基于名称注入，如果基于名称注入失败转为基于类型注入。         |

### 项目的开发流程是什么？ 

1. 产品人员设计产品原型
2. 讨论需求
3. 分模块设计接口
4. 出接口文档
5. 将接口文档给到前端人员，前后端分离开发
6. 开发完毕进行测试
7. 测试完毕发布项目，由运维人员进行部署安装。 

## 数据库相关

### 树型表的标记字段是什么？

树型表的标记字段是parentid即父结点的id。  

### 如何查询MySQL树型表？ 

*  当层级固定时可以用表的自链接进行查询。 

*  如果想灵活查询每个层级可以使用mysql递归方法，使用with RECURSIVE 实现。  

## MyBatis相关

### MyBatis的ResultType和ResultMap的区别？ 

 ResultType：指定映射类型，只要查询的字段名和类型的属性名匹配可以自动映射

 ResultMap：自定义映射规则，当查询的字段名和映射类型的属性不匹配时可以通过ResultMap自定义 映射规则，也可以实现一对多、一对一映射。  

###  \#{} 和 ${} 有什么区别？ 

* \#{}是标记一个占位符，可以防止sql注入
* ${} 用于在动态 sql中拼接字符串，可能导致sql注入。  